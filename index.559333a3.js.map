{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-d95a89ab86857bf5.js","node_modules/@parcel/runtime-js/lib/runtime-8abb31ad7f365222.js","src/js/dino.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"7Gfrt\\\":\\\"index.559333a3.js\\\",\\\"63WLt\\\":\\\"cactus.bb421734.png\\\"}\"));","module.exports = require('./helpers/bundle-url').getBundleURL('7Gfrt') + require('./helpers/bundle-manifest').resolve(\"63WLt\");","const dino = () => {\n  let speed = 3;\n  let score;\n  let animationFrameId = null;\n\n  const stageDOM = document.querySelector('.dino__stage');\n  const sprites = {\n    dino: {\n      isJumping: false,\n      isTouchingCactus: false,\n      dom: document.querySelector('.dino__dino'),\n    },\n    ground: {\n      width: 481,\n      offsets: [],\n      dom: Array.from(document.querySelectorAll('.dino__ground *')),\n    },\n    cactuses: {\n      dom: document.querySelector('.dino__cactuses'),\n      width: 33,\n      clones: [],\n    },\n  };\n\n  sprites.ground.dom.forEach((domElement, index) => {\n    domElement.style.left = index === 0 ? sprites.ground.width + 'px' : '0px';\n    sprites.ground.offsets.push(parseFloat(domElement.style.left));\n  });\n\n  const handleJump = e => {\n    const isJumpKey = e.code === 'Space' || e.code === 'ArrowUp';\n    const { dino } = sprites;\n\n    if (\n      ((e.type === 'keydown' && isJumpKey) || e.type === 'mousedown') &&\n      !dino.isJumping\n    ) {\n      const {\n        dom: { style },\n      } = dino;\n\n      e.preventDefault();\n\n      dino.isJumping = true;\n      style.bottom = '80%';\n\n      setTimeout(() => {\n        style.bottom = '';\n\n        stageDOM.addEventListener(\n          'transitionend',\n          () => (dino.isJumping = false)\n        );\n      }, 400); // Duration of the jump\n    }\n  };\n\n  stageDOM.addEventListener('focus', () => {\n    stageDOM.addEventListener('keydown', handleJump);\n    stageDOM.addEventListener('mousedown', handleJump);\n    stageDOM.classList.add('dino__stage-focus');\n  });\n\n  stageDOM.addEventListener('blur', () => {\n    stageDOM.removeEventListener('keydown', handleJump);\n    stageDOM.removeEventListener('mousedown', handleJump);\n    stageDOM.classList.remove('dino__stage-focus');\n  });\n\n  const checkCollision = () => {\n    const { dino, cactuses } = sprites;\n\n    const dinoRect = dino.dom.getBoundingClientRect();\n\n    for (const cactus of cactuses.clones) {\n      const cactusRect = cactus.dom.getBoundingClientRect();\n\n      if (\n        !(\n          dinoRect.bottom < cactusRect.top ||\n          dinoRect.top > cactusRect.bottom ||\n          dinoRect.right < cactusRect.left ||\n          dinoRect.left > cactusRect.right\n        )\n      ) {\n        sprites.dino.isTouchingCactus = true;\n        return true; // Колізія знайдена\n      }\n    }\n\n    sprites.dino.isTouchingCactus = false;\n    return false; // Колізія не знайдена\n  };\n\n  const animateWorld = function () {\n    const { ground, cactuses } = sprites;\n\n    const startMove = () => {\n      ground.offsets = ground.offsets.map(offset => offset - speed);\n\n      ground.dom.forEach((domElement, index) => {\n        const offset = ground.offsets[index];\n        domElement.style.left = `${offset}px`;\n\n        if (offset <= -ground.width) {\n          ground.offsets[index] = ground.width * (ground.dom.length - 1);\n        }\n      });\n\n      cactuses.clones.forEach((clone, index) => {\n        clone.offset -= speed;\n        clone.dom.style.left = `${clone.offset}px`;\n\n        if (clone.offset <= -cactuses.width) {\n          cactuses.dom.removeChild(clone.dom);\n          cactuses.clones.splice(index, 1);\n        }\n      });\n\n      if (\n        cactuses.clones.length === 0 ||\n        cactuses.clones[cactuses.clones.length - 1].offset <\n          ground.width - (Math.floor(Math.random() * 300) + 150)\n      ) {\n        let newCactus = document.createElement('img');\n        newCactus.src = new URL('../images/cactus.png', import.meta.url);\n        newCactus.classList.add('dino__sprite', 'dino__onground');\n        newCactus.style.width = Math.floor(Math.random() * 15) + 10 + 'px';\n        newCactus.alt = 'cactus';\n\n        cactuses.clones.push({\n          id: cactuses.clones.length,\n          offset: ground.width + Math.random() * (ground.width / 8),\n          dom: newCactus,\n        });\n\n        cactuses.dom.appendChild(newCactus);\n      }\n\n      score++;\n      stageDOM.querySelector('.dino__score span').textContent = score;\n\n      animationFrameId = requestAnimationFrame(startMove);\n\n      if (checkCollision()) {\n        stageDOM.querySelector('.dino__end').style.display = '';\n        stopAnimation();\n      }\n    };\n\n    startMove();\n  };\n\n  const stopAnimation = () => {\n    if (animationFrameId) {\n      cancelAnimationFrame(animationFrameId);\n      animationFrameId = null;\n\n      stageDOM.removeEventListener('keydown', handleJump);\n      stageDOM.removeEventListener('mousedown', handleJump);\n    }\n  };\n\n  const startGame = () => {\n    stopAnimation();\n\n    stageDOM.querySelector('.dino__play').style.display = 'none';\n    stageDOM.querySelector('.dino__end').style.display = 'none';\n\n    sprites.dino.isJumping = false;\n    sprites.dino.isTouchingCactus = false;\n\n    document.querySelector('.dino__cactuses').textContent = '';\n    sprites.cactuses.clones = [];\n\n    score = 0;\n\n    sprites.ground.dom.forEach((domElement, index) => {\n      domElement.style.left = index === 0 ? sprites.ground.width + 'px' : '0px';\n      sprites.ground.offsets[index] = parseFloat(domElement.style.left);\n    });\n\n    stageDOM.setAttribute('tabindex', '0');\n    stageDOM.focus();\n\n    animateWorld();\n  };\n\n  window.addEventListener('beforeunload', stopAnimation);\n\n  stageDOM\n    .querySelector('.dino__play .btn')\n    .addEventListener('click', startGame);\n  stageDOM\n    .querySelector('.dino__end .btn')\n    .addEventListener('click', startGame);\n\n  // Сховуємо екран завершення гри при завантаженні\n  stageDOM.querySelector('.dino__end').style.display = 'none';\n};\n\ndino();\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$7e7d9071818bc1c1$exports","getBundleURL","resolve","score","animationFrameId","stageDOM","document","querySelector","sprites","dino","isJumping","isTouchingCactus","dom","ground","width","offsets","Array","from","querySelectorAll","cactuses","clones","forEach","domElement","index","style","left","push","parseFloat","handleJump","e","isJumpKey","code","dino1","type","preventDefault","bottom","setTimeout","addEventListener","classList","add","removeEventListener","remove","animateWorld","startMove","map","offset","concat","clone","removeChild","splice","Math","floor","random","newCactus","createElement","src","URL","alt","appendChild","textContent","requestAnimationFrame","dino2","dinoRect","getBoundingClientRect","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","cactusRect","top","right","return","checkCollision","display","stopAnimation","cancelAnimationFrame","startGame","setAttribute","focus","window","$02ba40e528f13d41$var$dino"],"version":3,"file":"index.559333a3.js.map"}